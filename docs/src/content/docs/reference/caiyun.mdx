---
title: 移动云盘
description: 移动云盘使用文档
sidebar:
  order: 1
---

import { Tabs, TabItem } from "@astrojs/starlight/components";

:::caution[特别说明]
暂时以日常任务为主，请**每月至少登录一次**移动云盘 app 和 139 邮箱 app（记住，是两个 APP 不是其中一个），手动完成必要的任务。

请每天至少运行 2 次程序，避免由于某些因素导致某次出现偶发性错误。
:::

:::note[介绍]
目前全网功能最全的每日任务工具（仅每日任务）

抓包方式比 github 上面的那个主流的更友好

支持刷新 token，无需每月替换

WPS 版被 Github 上某个项目引用，但并未注明出处，无所谓了

不开源，本程序发布于 npm 实际上代码所有人都能获取到，开不开源无所谓，本人倾向于开源，最开始也确实如此。但是某些人的行为属实令人作呕，即使骂它做了死全家他也要去做，做了也没收益的事，可能它就是想要死全家。上天有好生之德而俺也一样，我生怕它们全家都死翘翘了，这严重破坏地球生态严重影响生物多样性。出于一个地球人的觉悟，为了爱与和平，我选择了闭源本程序。（阻挡潜在的贡献者？那是不存在的，我他妈就没见过有人想给我 PR）
:::

## Node.js 依赖名

[`@asunajs/caiyun`](https://www.npmjs.com/package/@asunajs/caiyun)

## WPS 表名

- `caiyun`
- `移动云盘`

## 当前支持功能

- [x] 云盘每日签到
- [x] 公共号每日签到
- [x] 公众号抽奖
- [x] 每日任务-上传
- [x] ~~每日任务-云笔记~~（官方下线）
- [x] APP 抽奖（摇一摇）
- [x] 浇水种树-云盘 APP（不完全支持，最后需要验证码领取云朵，所以不会升 10 级）
- [x] 浇水种树-邮箱 APP（不完全支持，最后需要验证码领取云朵，所以不会升 10 级）
- [x] 果园每日助力（强制性运行）
- [x] 为好友浇水（可配置）
- [x] 每月任务-邮箱 APP-可直接完成的
- [x] 热门任务-分享文件每月 7 次
- [x] 邮箱 APP 开盲盒
- [x] 每月任务-PC 端登录
- [x] 云朵大作战（仅提供部分功能）
- [x] 每月分享 20 次
- [x] 每月上传 1 G
- [x] AI 猜字谜
- [x] 自动领取每月备份奖励（APP）
- [x] 自动领取每月通知奖励（APP）
- [ ] 自动领取每月通知奖励（邮箱）
- [x] 开启备份后进行一次签到奖励翻倍
- [ ] 更多每月任务适配中，敬请不要期待

## 不会支持功能

- 不会支持直接与拉新，现金红包等挂钩的活动。

## 部分答疑

### APP 任务失败或未完成

在完成 APP 任务时，发出现 `失败 去观看精彩大片 请手动完成` 或者 `未完成 体验“文件收集”功能 请手动完成`。

- 失败：是指程序尝试去完成（已经实现完成逻辑），但最终并没有成功（预料之外的事情，属于程序 bug）。出现该错误可能是移动服务器存在缓存，再运行一次即可；也有可能是移动对该活动做出变更，原来的方式已经无法完成了。
- 未完成：是指程序只做了简单的处理（未实现完成逻辑），且最终未成功（预料之中的事情，属于正常行为）

### 本月奖励已领完

很多活动都是限量的，如摇一摇，盲盒，AI 猜字谜等

当出现该日志时可能就算本月已经领完了，当然只是可能，即使没领完也可能偶而触发，但连续触发一定是真的领完了。

### 获取 sid 失败 S002 别名或手机号码不存在

`FATAL  获取 sid 失败 S002 别名或手机号码不存在，请重新输入`

该错误可能是你没有使用过移动 139 邮箱 APP。主要出现在 AI 红包、开盲盒

### 初始化果园失败 用户登录信息丢失

`获取果园信息失败，请确认已经激活果园`

手动进入 APP 的果园页面

### 果园的水滴莫名其妙被人偷了

使用本脚本的人会互相进行水滴助力，而果园助力默认好友（奇妙的操作，鬼才产品经理），导致果园会有大量未知好友，被偷属于正常操作，你可以偷回来（

### 果园的水滴莫名其妙加了很多好友

同上一条，目前果园没有删除好友功能。同时为了公平性，互相助力是强制开启的。

## 使用方法

:::tip[提示]
文档在建设中，精力有限，欢迎 PR
:::

安装

```bash
npm install @asunajs/caiyun
```

**注意：** `run` 可选参数，配置文件路径

使用 cjs

```js
const { run } = require("@asunajs/caiyun");

(async () => {
  await run();
})();
```

使用 esm

```js
import { run } from "@asunajs/caiyun";

await run();
```

在阿里云函数中使用，其他环境请自行摸索

```js
const { run } = require("@asunajs/caiyun");

exports.handler = async function (event, context, callback) {
  callback(null, await run());
};
```

### 青龙面板

[青龙面板](/guides/qinglong/)

## 配置

:::note[提示]
以下部分内容为自动生成，可能存在部分不准确，仅供参考
:::

@include: ../core/caiyun/options.md

## Auth 获取

### PC 版

1. 登录 https://yun.139.com/
2. 打开开发者工具 F12
3. 找到应用程序/Application/存储（火狐）
4. 点击 Cookie
5. https://yun.139.com/ 找到 authorization（Basic 开头的）

![caiyun_auth](@imgs/config/caiyun_auth.png)

### APP 版

使用抓包工具找到请求头中的 Authorization 就行了

## 兑换

兑换的 id 在后面的 json 中找到。

此脚本可设置在 23:59 之后 24 点之前运行，`waitTo24Hour` 函数会等待到 24 点。

<Tabs>

<TabItem label="esm">
    
```js
import { loadConfig, useExchange } from '@asunajs/caiyun';

const { config, message } = await loadConfig()

// 使用配置中的第一个账号
const { exchange, waitTo24Hour, sendMessage } = await useExchange(config[0], message)

// 等待到 24 点（最大等待 2 分钟）
waitTo24Hour()

// 用网易云举例，此处为 id 数组（可多个）
await exchange([231228018])

// 发送推送，如果兑换成功默认发送一次
// await sendMessage()

```

</TabItem>

<TabItem label="cjs">

```js
const { loadConfig, useExchange } = require('@asunajs/caiyun');

(async () => {
  const { config, message } = await loadConfig()

  /** 使用配置中的第一个账号 */
  const { exchange, waitTo24Hour, sendMessage } = await useExchange(config[0], message)

  // 等待到 24 点（最大等待 2 分钟）
  waitTo24Hour()

  // 用网易云举例，此处为 id 数组（可多个）
  await exchange([231228018])

  // 快速兑换，如果需要自定义逻辑，可以使用这个 api，在兑换前不会有校验
  // await exchangeQuickly(231228018, '这是网易云')

  // 发送推送，如果兑换成功默认发送一次
  // await sendMessage()

})();

```

  </TabItem>

</Tabs>

### 兑换名称与 ID

<details>
<summary>兑换名称与 ID、价格、分组关系</summary>

```json
[
  {
    "prizeId": 211228001,
    "prizeName": "100G个人云空间月卡",
    "pOrder": 50,
    "groupId": 0
  },
  {
    "prizeId": 211228003,
    "prizeName": "1T个人云空间月卡",
    "pOrder": 400,
    "groupId": 0
  },
  {
    "prizeId": 211228002,
    "prizeName": "100G个人云空间年卡",
    "pOrder": 600,
    "groupId": 0
  },
  {
    "prizeId": 211228004,
    "prizeName": "1T个人云空间年卡",
    "pOrder": 4800,
    "groupId": 0
  },
  {
    "prizeId": 240531005,
    "prizeName": "移动云盘白银会员月卡",
    "pOrder": 500,
    "groupId": 0
  },
  {
    "prizeId": 231031003,
    "prizeName": "移动云盘白银会员季卡",
    "pOrder": 1500,
    "groupId": 0
  },
  {
    "prizeId": 211228005,
    "prizeName": "移动云盘白银会员年卡",
    "pOrder": 6000,
    "groupId": 0
  },
  {
    "prizeId": 240531006,
    "prizeName": "移动云盘黄金会员月卡",
    "pOrder": 1000,
    "groupId": 0
  },
  {
    "prizeId": 220915009,
    "prizeName": "移动云盘黄金会员季卡",
    "pOrder": 3000,
    "groupId": 0
  },
  {
    "prizeId": 231031002,
    "prizeName": "移动云盘黄金会员年卡",
    "pOrder": 12000,
    "groupId": 0
  },
  {
    "prizeId": 240531007,
    "prizeName": "移动云盘钻石会员月卡",
    "pOrder": 2500,
    "groupId": 0
  },
  {
    "prizeId": 231031007,
    "prizeName": "移动云盘钻石会员季卡",
    "pOrder": 7500,
    "groupId": 0
  },
  {
    "prizeId": 240207001,
    "prizeName": "移动云盘白银畅享会员月卡",
    "pOrder": 1499,
    "groupId": 0
  },
  {
    "prizeId": 231031008,
    "prizeName": "移动云盘钻石会员年卡",
    "pOrder": 30000,
    "groupId": 0
  },
  {
    "prizeId": 240205002,
    "prizeName": "云手机专业版会员月卡",
    "pOrder": 1900,
    "groupId": 0
  },
  {
    "prizeId": 240205004,
    "prizeName": "美图秀秀粉钻VIP月卡",
    "pOrder": 2500,
    "groupId": 0
  },
  {
    "prizeId": 240205003,
    "prizeName": "美颜相机紫钻VIP月卡",
    "pOrder": 2500,
    "groupId": 0
  },
  {
    "prizeId": 231228027,
    "prizeName": "腾讯视频周卡",
    "pOrder": 1500,
    "groupId": 0
  },
  {
    "prizeId": 231228028,
    "prizeName": "爱奇艺视频周卡",
    "pOrder": 1500,
    "groupId": 0
  },
  {
    "prizeId": 231228029,
    "prizeName": "优酷视频周卡",
    "pOrder": 1500,
    "groupId": 0
  },
  {
    "prizeId": 231228011,
    "prizeName": "爱奇艺月卡",
    "pOrder": 3000,
    "groupId": 1
  },
  {
    "prizeId": 231228012,
    "prizeName": "腾讯视频月卡",
    "pOrder": 3000,
    "groupId": 1
  },
  {
    "prizeId": 231228013,
    "prizeName": "优酷视频月卡",
    "pOrder": 3000,
    "groupId": 1
  },
  {
    "prizeId": 231228014,
    "prizeName": "芒果TV月卡",
    "pOrder": 3000,
    "groupId": 1
  },
  {
    "prizeId": 231228015,
    "prizeName": "哔哩哔哩会员月卡",
    "pOrder": 2500,
    "groupId": 1
  },
  {
    "prizeId": 231228016,
    "prizeName": "酷狗音乐月卡",
    "pOrder": 1800,
    "groupId": 2
  },
  {
    "prizeId": 231228017,
    "prizeName": "QQ音乐月卡",
    "pOrder": 1500,
    "groupId": 2
  },
  {
    "prizeId": 231228018,
    "prizeName": "网易云音乐月卡",
    "pOrder": 1800,
    "groupId": 2
  },
  {
    "prizeId": 231228019,
    "prizeName": "饿了么超级会员月卡",
    "pOrder": 1750,
    "groupId": 5
  },
  {
    "prizeId": 231228020,
    "prizeName": "美团外卖15元通用红包",
    "pOrder": 2500,
    "groupId": 5
  },
  {
    "prizeId": 231228021,
    "prizeName": "美团外卖10元通用红包",
    "pOrder": 1500,
    "groupId": 5
  },
  {
    "prizeId": 231228022,
    "prizeName": "美团外卖5元通用红包",
    "pOrder": 1000,
    "groupId": 5
  },
  {
    "prizeId": 231228025,
    "prizeName": "菜鸟裹裹5元寄件券",
    "pOrder": 500,
    "groupId": 7
  },
  {
    "prizeId": 231228026,
    "prizeName": "菜鸟裹裹10元寄件券",
    "pOrder": 1000,
    "groupId": 7
  },
  {
    "prizeId": 240112007,
    "prizeName": "畅影VIP单次转存券",
    "pOrder": 250,
    "groupId": 8
  },
  {
    "prizeId": 240117001,
    "prizeName": "畅影SVIP单次转存券",
    "pOrder": 450,
    "groupId": 8
  }
]
```

</details>
